<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Binary Visualizer</title>
  <script src="https://cdn.jsdelivr.net/npm/jsxgraph@1.7.0/distrib/jsxgraphcore.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsxgraph@1.7.0/distrib/jsxgraph.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f0f0f0;
    }
    #jxgbox {
      width: 900px;
      height: 400px;
      margin: 20px auto;
      background: white;
      border: 1px solid #ccc;
    }
    .info {
      font-size: 1.2em;
      margin-top: 10px;
    }
    .jxgbox button {
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.5em;
      transition: 0.2s;
    }
  </style>
</head>
<body>

<h1>Interactive Binary Visualizer</h1>
<div id="jxgbox" class="jxgbox"></div>
<div class="info" id="binaryText">Current Binary: 00000000</div>
<div class="info" id="decimalText">Decimal Value: 0</div>

<script>
  const board = JXG.JSXGraph.initBoard('jxgbox', {
    boundingbox: [-1, 10, 9, -1],
    axis: false,
    showNavigation: false
  });

  const numBits = 8;
  let binaryValue = new Array(numBits).fill(0);

  const binaryTextDiv = document.getElementById('binaryText');
  const decimalTextDiv = document.getElementById('decimalText');

  function updateDisplay() {
    const decimal = binaryValue.reduce((sum, bit, index) => sum + bit * Math.pow(2, index), 0);
    const binaryString = binaryValue.slice().reverse().join('');
    binaryTextDiv.textContent = `Current Binary: ${binaryString}`;
    decimalTextDiv.textContent = `Decimal Value: ${decimal}`;
  }

  for (let i = 0; i < numBits; i++) {
    const xPosition = i + 0.5;
    const bitWeight = Math.pow(2, i);

    const button = board.create('button', [
      xPosition,
      6,
      '0',
      function () {
        binaryValue[i] = binaryValue[i] === 0 ? 1 : 0;
        this.setText(binaryValue[i].toString());

        const domButton = this.rendNodeButton;
        if (binaryValue[i] === 1) {
          domButton.style.backgroundColor = '#FFD700';
          domButton.style.boxShadow = '0 0 10px #FFD700';
        } else {
          domButton.style.backgroundColor = '#E0E0E0';
          domButton.style.boxShadow = 'none';
        }

        updateDisplay();
      }
    ], {
      fontSize: 16
    });

    board.create('text', [
      xPosition,
      4.5,
      `$2^{${i}} = ${bitWeight}$`
    ], {
      fontSize: 14,
      anchorX: 'middle'
    });
  }

  updateDisplay();
</script>
</body>
</html>
