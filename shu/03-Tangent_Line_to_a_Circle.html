<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tangent on Circle</title>
  <script src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    #box {
      width: 600px;
      height: 600px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <h2>Tangent Line to a Circle</h2>
  <p>Drag the point on the circle to see how the tangent changes. The tangent is always perpendicular to the radius.</p>

  <div id="box"></div>

  <script>
    const board = JXG.JSXGraph.initBoard('box', {
      boundingbox: [-6, 6, 6, -6],
      axis: true
    });

    // Center of the circle
    const center = board.create('point', [0, 0], {
      name: 'O',
      fixed: true
    });

    // Radius
    const radius = 4;

    // Circle
    const circle = board.create('circle', [center, radius], {
      strokeColor: '#0077cc'
    });

    // Draggable point on circle
    const A = board.create('glider', [radius, 0, circle], {
      name: 'A',
      color: 'red'
    });

    // Radius line
    const radiusLine = board.create('line', [center, A], {
      straightFirst: false,
      straightLast: false,
      strokeColor: '#888',
      dash: 2
    });

    // Tangent line at point A
    const tangent = board.create('tangent', [A, circle], {
      strokeColor: 'green',
      strokeWidth: 2
    });

    // Create a helper point B on the tangent line to properly define the angle.
    // The tangent vector is perpendicular to the radius vector.
    // Radius vector: (A.X() - center.X(), A.Y() - center.Y())
    // Tangent vector can be (A.Y() - center.Y(), -(A.X() - center.X()))
    const B = board.create('point', [
      () => A.X() + (A.Y() - center.Y()), 
      () => A.Y() - (A.X() - center.X())
    ], {
      visible: false // We don't need to see this point, it's just for the angle definition
    });

    // Dynamic angle display (always 90°)
    const angle = board.create('angle', [B, A, center], {
      type: 'sector',
      radius: 0.8,
      name: '90°',
      fillColor: 'lightgreen'
    });
  </script>

</body>
</html>