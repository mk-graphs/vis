<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Function Graph</title>
  <script src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    #box {
      width: 600px;
      height: 400px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }
    label {
      margin-right: 10px;
    }
    select, input[type=range] {
      margin-right: 20px;
    }
  </style>
</head>
<body>

  <h2>Interactive Function Graph</h2>
  <p>Choose a function and adjust the parameters to see the graph update in real time.</p>

  <div id="box"></div>

  <div>
    <label for="funcType">Function type:</label>
    <select id="funcType">
      <option value="linear">Linear: y = ax + b</option>
      <option value="quadratic">Quadratic: y = ax² + b</option>
      <option value="sine">Sine: y = A·sin(Bx)</option>
    </select>
  </div>

  <div>
    <label>a or A:
      <input type="range" id="aSlider" min="-5" max="5" step="0.1" value="1">
      <span id="aVal">1</span>
    </label>
    <label>b or B:
      <input type="range" id="bSlider" min="-5" max="5" step="0.1" value="0">
      <span id="bVal">0</span>
    </label>
  </div>

  <script>
    const board = JXG.JSXGraph.initBoard('box', {
      boundingbox: [-10, 10, 10, -10],
      axis: true
    });

    let graph;

    function updateGraph() {
      const type = document.getElementById('funcType').value;
      const a = parseFloat(document.getElementById('aSlider').value);
      const b = parseFloat(document.getElementById('bSlider').value);

      document.getElementById('aVal').textContent = a;
      document.getElementById('bVal').textContent = b;

      if (graph) board.removeObject(graph);

      let f;
      if (type === 'linear') {
        f = (x) => a * x + b;
      } else if (type === 'quadratic') {
        f = (x) => a * x * x + b;
      } else if (type === 'sine') {
        f = (x) => a * Math.sin(b * x);
      }

      graph = board.create('functiongraph', [f, -10, 10], {
        strokeWidth: 2,
        strokeColor: 'blue'
      });
    }

    // Initialize graph
    updateGraph();

    // Event listeners
    document.getElementById('funcType').addEventListener('change', updateGraph);
    document.getElementById('aSlider').addEventListener('input', updateGraph);
    document.getElementById('bSlider').addEventListener('input', updateGraph);

    // Mouse tracker point
    const tracker = board.create('point', [0, 0], {
      name: '',
      visible: false,
      size: 2,
      color: 'red',
      fixed: true,
      showInfoBox: false
    });

    board.on('mousemove', function(e) {
      const coords = board.getCoordsTopLeftCorner(e);
      const absPos = JXG.getPosition(e, 0);
      const x = board.canvasXToUsr(absPos[0]);
      const y = board.canvasYToUsr(absPos[1]);
      if (x < -10 || x > 10 || y < -10 || y > 10) {
        tracker.setAttribute({ visible: false });
        return;
      }
      tracker.moveTo([x, y]);
      tracker.setAttribute({
        visible: true,
        name: `(${x.toFixed(2)}, ${y.toFixed(2)})`
      });
    });
  </script>

</body>
</html>
