<!DOCTYPE html>
<html>
<head>
    <title>Tip Calculator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/1.4.6/jsxgraphcore.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 400px;
            margin: 50px auto;
            padding: 30px;
            background: #f8f9fa;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin: 0 0 30px 0;
        }
        .input-group {
            margin: 25px 0;
        }
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 8px;
            text-align: center;
        }
        #chart {
            width: 100%;
            height: 200px;
            margin: 20px 0;
        }
        .result {
            font-size: 24px;
            font-weight: bold;
            color: #28a745;
            margin: 20px 0;
        }
        .breakdown {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
        }
    </style>
</head>
<body>
<div class="card">

    <div class="input-group">
        <label>Bill Amount</label>
        <input type="number" id="bill" value="50" min="1" max="1000">
    </div>

    <div class="input-group">
        <label>Tip: <span id="tip-percent">18</span>%</label>
        <input type="range" id="tip" min="5" max="30" value="18">
    </div>

    <div id="chart"></div>

    <div class="result">
        Total: <span id="total">59.00</span>
    </div>

    <div class="breakdown">
        <div class="breakdown-item">
            <span>Bill:</span>
            <span><span id="bill-display">50.00</span></span>
        </div>
        <div class="breakdown-item">
            <span>Tip:</span>
            <span><span id="tip-display">9.00</span></span>
        </div>
    </div>
</div>

<script>
    const board = JXG.JSXGraph.initBoard('chart', {
        boundingbox: [-0.5, 1.2, 2.5, -0.2],
        axis: false,
        showNavigation: false,
        showCopyright: false,
        grid: false
    });

    let billBar = null;
    let tipBar = null;

    function updateTip() {
        const bill = parseFloat(document.getElementById('bill').value) || 0;
        const tipPercent = parseInt(document.getElementById('tip').value);
        const tip = bill * (tipPercent / 100);
        const total = bill + tip;


        if (billBar) board.removeObject(billBar);
        if (tipBar) board.removeObject(tipBar);

        const maxVal = total || 1;
        const billHeight = bill / maxVal;
        const tipHeight = tip / maxVal;

        // Bill bar
        billBar = board.create('polygon', [
            [0.5, 0], [1.5, 0], [1.5, billHeight], [0.5, billHeight]
        ], {
            fillColor: '#007bff',
            strokeWidth: 0,
            name: 'Bill'
        });

        // Tip bar (stacked)
        tipBar = board.create('polygon', [
            [0.5, billHeight], [1.5, billHeight], [1.5, billHeight + tipHeight], [0.5, billHeight + tipHeight]
        ], {
            fillColor: '#28a745',
            strokeWidth: 0,
            name: 'Tip'
        });

        // Labels
        board.create('text', [1, -0.1, 'Total'], {
            fontSize: 12,
            anchorX: 'middle'
        });


        document.getElementById('tip-percent').textContent = tipPercent;
        document.getElementById('bill-display').textContent = bill.toFixed(2);
        document.getElementById('tip-display').textContent = tip.toFixed(2);
        document.getElementById('total').textContent = total.toFixed(2);

        board.update();
    }

    document.getElementById('bill').oninput = updateTip;
    document.getElementById('tip').oninput = updateTip;

    updateTip();
</script>
</body>
</html>